{
  "name": "Financial Metrics",
  "lineageTag": "f651dc61-410c-41e8-b5df-a7917bf06203",
  "calculationGroup": {
    "calculationItems": [
      {
        "name": "Revenue",
        "expression": "CALCULATE(SELECTEDMEASURE(), 'transaction_master'[gl_category_1] = \"Revenue\")",
        "ordinal": 0
      },
      {
        "name": "COGS",
        "expression": [
          "CALCULATE(",
          "    SELECTEDMEASURE(),",
          "   'transaction_master'[gl_category_1] = \"COGS\"",
          ")"
        ],
        "ordinal": 1
      },
      {
        "name": "SG&A",
        "expression": [
          "CALCULATE(",
          "    SELECTEDMEASURE(),",
          "    'transaction_master'[gl_category_1] = \"SG&A\"",
          ")",
          ""
        ],
        "ordinal": 3
      },
      {
        "name": "Other",
        "expression": [
          "CALCULATE(",
          "    SELECTEDMEASURE(),",
          "    'transaction_master'[gl_category_1] = \"Other\"",
          ")"
        ],
        "ordinal": 5
      },
      {
        "name": "Gross Profit",
        "expression": [
          "SWITCH(",
          "    TRUE(),",
          "",
          "    SELECTEDMEASURENAME() = \"Actual_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Gross Profit\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\"}),",
          "",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        ),",
          "",
          "    SELECTEDMEASURENAME() = \"LY_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Gross Profit\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\"}),",
          "",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        ),",
          "",
          "    SELECTEDMEASURENAME() = \"plan_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Gross Profit\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\"}),",
          "",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        ),",
          "",
          "    SELECTEDMEASURE()",
          ")",
          ""
        ],
        "ordinal": 2
      },
      {
        "name": "EBITDA",
        "expression": [
          "",
          "SWITCH(",
          "    TRUE(),",
          "",
          "    SELECTEDMEASURENAME() = \"Actual_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"EBITDA\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\", \"SG&A\"}),",
          "",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        )",
          "        ,",
          "",
          "    SELECTEDMEASURENAME() = \"LY_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"EBITDA\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\"}),",
          "",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        ),",
          "",
          "    SELECTEDMEASURENAME() = \"plan_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"EBITDA\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\"}),",
          "",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        ),",
          "",
          "    SELECTEDMEASURE()",
          ")",
          ""
        ],
        "ordinal": 4
      },
      {
        "name": "Net Income",
        "expression": [
          "",
          "SWITCH(",
          "    TRUE(),",
          "",
          "    SELECTEDMEASURENAME() = \"Actual_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Net Income\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\",\"Other\"}),",
          "",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Other\"",
          "        )",
          "        ,",
          "",
          "    SELECTEDMEASURENAME() = \"LY_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Net Income\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\",\"Other\"}),",
          "",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Other\"",
          "        ),",
          "",
          "    SELECTEDMEASURENAME() = \"plan_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Net Income\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\",\"Other\"}),",
          "",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Other\"",
          "        ),",
          "",
          "    SELECTEDMEASURE()",
          ")",
          ""
        ],
        "ordinal": 6
      },
      {
        "name": "ODE",
        "expression": [
          "CALCULATE(",
          "    SELECTEDMEASURE(),",
          "    'transaction_master'[gl_category_1] = \"ODE\"",
          ")"
        ],
        "ordinal": 7
      },
      {
        "name": "Owners Discretionary Income",
        "expression": [
          "",
          "SWITCH(",
          "    TRUE(),",
          "",
          "    SELECTEDMEASURENAME() = \"Actual_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Owners Discretionary Income\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\",\"Other\",\"ODE\"}),",
          "",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Other\"",
          "        )",
          "        +",
          "        CALCULATE(",
          "            [Actual_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"ODE\"",
          "        )",
          "        ,",
          "",
          "    SELECTEDMEASURENAME() = \"LY_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Owners Discretionary Income\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\",\"Other\",\"ODE\"}),",
          "",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Other\"",
          "        )",
          "        +",
          "        CALCULATE(",
          "            [LY_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"ODE\"",
          "        ),",
          "",
          "    SELECTEDMEASURENAME() = \"plan_rev\" &&",
          "    SELECTEDVALUE('Financial Metrics'[Calculation group column]) = \"Owners Discretionary Income\" &&",
          "    (",
          "    (NOT ISINSCOPE(transaction_master[gl_category_2]) && NOT ISINSCOPE(transaction_master[gl_category_3])) || ",
          "    SELECTEDVALUE('transaction_master'[gl_category_1]) IN {\"Revenue\",\"COGS\",\"SG&A\",\"Other\",\"ODE\"}),",
          "",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Revenue\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"COGS\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"SG&A\"",
          "        )",
          "        -",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"Other\"",
          "        )",
          "        +",
          "        CALCULATE(",
          "            [plan_rev],",
          "            REMOVEFILTERS('transaction_master'[gl_category_1],",
          "            'transaction_master'[gl_category_2],",
          "            'transaction_master'[gl_category_3]),",
          "            'transaction_master'[gl_category_1] = \"ODE\"",
          "        ),",
          "",
          "    SELECTEDMEASURE()",
          ")"
        ],
        "ordinal": 8
      }
    ]
  },
  "annotations": [
    {
      "name": "TabularEditor_Relationships",
      "value": "[]"
    }
  ]
}